{"ast":null,"code":"import Header from\"./Header\";import Footer from\"./Footer\";import Story from\"./Story\";import Form from\"./Form\";import{useState,useEffect,useRef}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[character1,setCharacter1]=useState(\"\");const[character2,setCharacter2]=useState(\"\");const[writer,setWriter]=useState(\"\");const[query,setQuery]=useState(\"\");const[reply,setReply]=useState(\"\");const[loading,setLoading]=useState(false);const apiUrl=process.env.REACT_APP_API_BASE_URL;useEffect(()=>{const handleSend=async()=>{console.log(`${apiUrl}/query`);setLoading(true);try{const res=await fetch(`${apiUrl}/query`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({query})});const data=await res.json();// const message = data.choices?.[0]?.message?.content || \"[No response]\";\nsetReply(data.answer);}catch(error){setReply(\"Error: \"+error.message);}finally{setLoading(false);}};if(query)handleSend();return()=>{};},[query]);// ðŸ‘ˆ Dependency array\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{title:\"AI generated storyline\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Form,{character1:character1,character2:character2,writer:writer,loading:loading,setCharacter1:setCharacter1,setCharacter2:setCharacter2,setWriter:setWriter,setQuery:setQuery}),/*#__PURE__*/_jsx(Story,{story:reply}),\";\"]}),/*#__PURE__*/_jsx(Footer,{})]});}export default App;","map":{"version":3,"names":["Header","Footer","Story","Form","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","App","character1","setCharacter1","character2","setCharacter2","writer","setWriter","query","setQuery","reply","setReply","loading","setLoading","apiUrl","process","env","REACT_APP_API_BASE_URL","handleSend","console","log","res","fetch","method","headers","body","JSON","stringify","data","json","answer","error","message","className","children","title","story"],"sources":["/home/ec2-user/aibook/frontend/src/App.js"],"sourcesContent":["import Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Story from \"./Story\";\nimport Form from \"./Form\";\nimport { useState, useEffect, useRef } from \"react\";\n\nfunction App() {\n  const [character1, setCharacter1] = useState(\"\");\n  const [character2, setCharacter2] = useState(\"\");\n  const [writer, setWriter] = useState(\"\");\n  const [query, setQuery] = useState(\"\");\n  const [reply, setReply] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const apiUrl = process.env.REACT_APP_API_BASE_URL;\n\n\n  useEffect(() => {\n    const handleSend = async () => {\n      console.log(`${apiUrl}/query`)\n      setLoading(true);\n      try {\n        const res = await fetch(`${apiUrl}/query`, {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json',},\n        body: JSON.stringify({query}),\n        });\n\n        const data = await res.json();\n        // const message = data.choices?.[0]?.message?.content || \"[No response]\";\n        setReply(data.answer);\n      } catch (error) {\n        setReply(\"Error: \" + error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (query) handleSend();\n    return () => {};\n  }, [query]); // ðŸ‘ˆ Dependency array\n\n  return (\n    <div className=\"App\">\n      <Header title={\"AI generated storyline\"} />\n      <div className=\"container\">\n        <Form\n          character1={character1}\n          character2={character2}\n          writer={writer}\n          loading={loading}\n          setCharacter1={setCharacter1}\n          setCharacter2={setCharacter2}\n          setWriter={setWriter}\n          setQuery={setQuery}\n        />\n        <Story story={reply} />;\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,OAASC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACY,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAoB,MAAM,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,CAGjDtB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7BC,OAAO,CAACC,GAAG,CAAC,GAAGN,MAAM,QAAQ,CAAC,CAC9BD,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAQ,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGR,MAAM,QAAQ,CAAE,CAC3CS,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAmB,CAAC,CAC9CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACnB,KAAK,CAAC,CAC5B,CAAC,CAAC,CAEF,KAAM,CAAAoB,IAAI,CAAG,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7B;AACAlB,QAAQ,CAACiB,IAAI,CAACE,MAAM,CAAC,CACvB,CAAE,MAAOC,KAAK,CAAE,CACdpB,QAAQ,CAAC,SAAS,CAAGoB,KAAK,CAACC,OAAO,CAAC,CACrC,CAAC,OAAS,CACRnB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAIL,KAAK,CAAEU,UAAU,CAAC,CAAC,CACvB,MAAO,IAAM,CAAC,CAAC,CACjB,CAAC,CAAE,CAACV,KAAK,CAAC,CAAC,CAAE;AAEb,mBACER,KAAA,QAAKiC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBpC,IAAA,CAACR,MAAM,EAAC6C,KAAK,CAAE,wBAAyB,CAAE,CAAC,cAC3CnC,KAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpC,IAAA,CAACL,IAAI,EACHS,UAAU,CAAEA,UAAW,CACvBE,UAAU,CAAEA,UAAW,CACvBE,MAAM,CAAEA,MAAO,CACfM,OAAO,CAAEA,OAAQ,CACjBT,aAAa,CAAEA,aAAc,CAC7BE,aAAa,CAAEA,aAAc,CAC7BE,SAAS,CAAEA,SAAU,CACrBE,QAAQ,CAAEA,QAAS,CACpB,CAAC,cACFX,IAAA,CAACN,KAAK,EAAC4C,KAAK,CAAE1B,KAAM,CAAE,CAAC,IACzB,EAAK,CAAC,cACNZ,IAAA,CAACP,MAAM,GAAE,CAAC,EACP,CAAC,CAEV,CAEA,cAAe,CAAAU,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}